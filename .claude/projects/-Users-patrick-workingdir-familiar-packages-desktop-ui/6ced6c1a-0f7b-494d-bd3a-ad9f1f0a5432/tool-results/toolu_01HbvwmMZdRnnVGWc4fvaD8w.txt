     1→import { test, expect } from './fixtures/test-fixtures';
     2→
     3→test.describe('Triggers View', () => {
     4→  test.beforeEach(async ({ triggersPage }) => {
     5→    await triggersPage.goto();
     6→  });
     7→
     8→  test('should display triggers page', async ({ page }) => {
     9→    await expect(page).toHaveURL('/triggers');
    10→  });
    11→
    12→  test('should show triggers header', async ({ page }) => {
    13→    // Should show triggers count
    14→    await expect(page.locator('text=triggers')).toBeVisible();
    15→  });
    16→
    17→  test('should show trigger list headers', async ({ page }) => {
    18→    await expect(page.locator('text=Trigger')).toBeVisible();
    19→    await expect(page.locator('text=Type')).toBeVisible();
    20→  });
    21→
    22→  test('should show empty state when no triggers exist', async ({ page }) => {
    23→    // If no triggers, should show empty message
    24→    const emptyState = page.locator('text=No triggers found');
    25→    // May or may not be visible depending on state
    26→  });
    27→
    28→  test('should display trigger items in list', async ({ page }) => {
    29→    await page.waitForTimeout(1000);
    30→
    31→    const triggerItems = page.locator('[data-testid="trigger-item"]');
    32→    // May have triggers or may be empty
    33→  });
    34→
    35→  test('should select a trigger when clicked', async ({ page }) => {
    36→    await page.waitForTimeout(1000);
    37→
    38→    const triggerItem = page.locator('[data-testid="trigger-item"]').first();
    39→    if (await triggerItem.isVisible()) {
    40→      await triggerItem.click();
    41→      // Trigger should be selected/highlighted
    42→    }
    43→  });
    44→
    45→  test('should open context menu on right-click', async ({ page }) => {
    46→    await page.waitForTimeout(1000);
    47→
    48→    const triggerItem = page.locator('[data-testid="trigger-item"]').first();
    49→    if (await triggerItem.isVisible()) {
    50→      await triggerItem.click({ button: 'right' });
    51→      // Context menu should appear
    52→      await expect(page.locator('[data-testid="context-menu"]')).toBeVisible();
    53→    }
    54→  });
    55→
    56→  test('should show delete option in context menu', async ({ page }) => {
    57→    await page.waitForTimeout(1000);
    58→
    59→    const triggerItem = page.locator('[data-testid="trigger-item"]').first();
    60→    if (await triggerItem.isVisible()) {
    61→      await triggerItem.click({ button: 'right' });
    62→      await expect(page.locator('text=Delete')).toBeVisible();
    63→    }
    64→  });
    65→
    66→  test('should show trigger type badge', async ({ page }) => {
    67→    await page.waitForTimeout(1000);
    68→
    69→    const triggerItem = page.locator('[data-testid="trigger-item"]').first();
    70→    if (await triggerItem.isVisible()) {
    71→      // Should show trigger type (calendar, webhook, etc.)
    72→      const typeBadge = triggerItem.locator('[data-testid="trigger-type"]');
    73→      // May have a type indicator
    74→    }
    75→  });
    76→});
    77→
    78→test.describe('Triggers - Types', () => {
    79→  test.beforeEach(async ({ triggersPage }) => {
    80→    await triggersPage.goto();
    81→  });
    82→
    83→  test('should display calendar triggers', async ({ page }) => {
    84→    await page.waitForTimeout(1000);
    85→
    86→    // Look for calendar type triggers
    87→    const calendarTriggers = page.locator('text=calendar').or(page.locator('text=Calendar'));
    88→    // May or may not be visible
    89→  });
    90→
    91→  test('should display webhook triggers', async ({ page }) => {
    92→    await page.waitForTimeout(1000);
    93→
    94→    // Look for webhook type triggers
    95→    const webhookTriggers = page.locator('text=webhook').or(page.locator('text=Webhook'));
    96→    // May or may not be visible
    97→  });
    98→
    99→  test('should display file watcher triggers', async ({ page }) => {
   100→    await page.waitForTimeout(1000);
   101→
   102→    // Look for file watcher type triggers
   103→    const fileWatcherTriggers = page.locator('text=file').or(page.locator('text=watcher'));
   104→    // May or may not be visible
   105→  });
   106→});
   107→
   108→test.describe('Triggers - Agent Subscription', () => {
   109→  test.beforeEach(async ({ triggersPage }) => {
   110→    await triggersPage.goto();
   111→  });
   112→
   113→  test('should show subscribe option in context menu', async ({ page }) => {
   114→    await page.waitForTimeout(1000);
   115→
   116→    const triggerItem = page.locator('[data-testid="trigger-item"]').first();
   117→    if (await triggerItem.isVisible()) {
   118→      await triggerItem.click({ button: 'right' });
   119→      // Should have subscribe option
   120→      const subscribeOption = page.locator('text=Subscribe');
   121→      // May or may not be visible depending on trigger state
   122→    }
   123→  });
   124→
   125→  test('should show subscribed agents for trigger', async ({ page }) => {
   126→    await page.waitForTimeout(1000);
   127→
   128→    const triggerItem = page.locator('[data-testid="trigger-item"]').first();
   129→    if (await triggerItem.isVisible()) {
   130→      await triggerItem.click();
   131→      // Should show list of subscribed agents or empty state
   132→    }
   133→  });
   134→});
   135→
   136→test.describe('Triggers - Keyboard Navigation', () => {
   137→  test.beforeEach(async ({ triggersPage }) => {
   138→    await triggersPage.goto();
   139→  });
   140→
   141→  test('should navigate triggers with arrow keys', async ({ page }) => {
   142→    await page.waitForTimeout(1000);
   143→
   144→    const triggerItems = page.locator('[data-testid="trigger-item"]');
   145→    const count = await triggerItems.count();
   146→
   147→    if (count > 1) {
   148→      await triggerItems.first().click();
   149→      await page.keyboard.press('ArrowDown');
   150→      // Focus should move to next trigger
   151→    }
   152→  });
   153→
   154→  test('should close context menu with Escape', async ({ page }) => {
   155→    await page.waitForTimeout(1000);
   156→
   157→    const triggerItem = page.locator('[data-testid="trigger-item"]').first();
   158→    if (await triggerItem.isVisible()) {
   159→      await triggerItem.click({ button: 'right' });
   160→      await expect(page.locator('[data-testid="context-menu"]')).toBeVisible();
   161→
   162→      await page.keyboard.press('Escape');
   163→      await expect(page.locator('[data-testid="context-menu"]')).not.toBeVisible();
   164→    }
   165→  });
   166→});
   167→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
